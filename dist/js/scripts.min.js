"use strict";!function(){var e=document.querySelector(".accordion"),t=document.querySelectorAll(".accordion__item"),n=document.querySelectorAll(".accordion__trigger"),o=!1;function r(e){var t=e.target.parentNode,n=e.target.nextElementSibling;"false"===t.dataset.open?(t.dataset.open="true",t.classList.add("accordion__item--show"),n.style.maxHeight=n.scrollHeight+"px"):(t.dataset.open="false",t.classList.remove("accordion__item--show"),n.style.maxHeight=null)}function i(){o||(o=!0,e.classList.add("accordion--active"),n.forEach((function(e){e.classList.add("accordion__trigger--active"),e.addEventListener("click",r)})),t.forEach((function(e){"true"===e.dataset.open&&e.classList.add("accordion__item--show")})))}document.addEventListener("DOMContentLoaded",(function(){window.innerWidth<window.utils.TABLET_WIDTH&&i()})),window.addEventListener("resize",(function(){window.innerWidth<window.utils.TABLET_WIDTH&&i(),window.innerWidth>=window.utils.TABLET_WIDTH&&o&&(o=!1,e.classList.remove("accordion--active"),n.forEach((function(e){e.classList.remove("accordion__trigger--active"),e.removeEventListener("click",r)})))}))}(),window.backend={sendFormData:function(e){e.querySelector(".form__button").setAttribute("disabled","true");var t=new FormData(e),n=new XMLHttpRequest;n.open("POST","#"),n.onreadystatechange=function(){var t="";if(4===n.readyState){switch(n.status){case 0:t="Проверьте подключение к сети";break;case 200:window.utils.onSuccess(e);break;case 400:t="Неверный запрос";break;case 401:t="Пользователь не авторизован";break;case 404:t="Серевер не найден";break;default:t="Cтатус ответа: "+n.status+" "+n.statusText}t&&window.utils.onError(e,t)}},n.timeout=2e3,n.send(t)}},function(){var e=document.querySelector("body");window.body={lock:function(){var t=window.innerWidth-document.querySelector(".container").offsetWidth+"px";e.classList.add("lock"),e.style.paddingRight=t},unlock:function(){setTimeout((function(){e.style.paddingRight=0,e.classList.remove("lock")}),200)}}}(),window.const={ErrorMessages:["Укажите Ваше имя","Укажите Ваш адрес","Укажите Ваш телефон","Напишите текст сообщения","Только кириллица, пробел и тире","Неверный формат телефона","Ваше сообщение похоже на спам, уберите специальные символы.","Выберите один из вариантов"]},window.data={"pinsСoordinates":{"Песчаная улица, дом 13":[55.801131,37.508167],"Подсосенский переулок, 11":[55.757556,37.651592]}},function(){var e=document.querySelector(".delivery-form"),t=document.querySelectorAll(".delivery-form__input"),n=document.querySelector(".delivery-form__button"),o=!1;function r(e,t,n){var o=n.querySelector("[name="+e+"]");o.classList.add("form__input--error");var r=n.querySelector("[name="+e+"] + p");r?r.textContent=t:((r=document.createElement("p")).classList.add("form__error-message"),r.textContent=t,o.parentNode.insertBefore(r,o.nextSibling))}function i(e,t){var n="";return{name:function(){0===e.name.length?n=window.const.ErrorMessages[0]:!1===window.utils.PATTERNS.name.test(e.name)&&(n=window.const.ErrorMessages[4])},phone:function(){0===e.phone.length?n=window.const.ErrorMessages[2]:!1===window.utils.PATTERNS.phone.test(e.phone)&&(n=window.const.ErrorMessages[5])},address:function(){0===e.address.length?n=window.const.ErrorMessages[1]:!1===window.utils.PATTERNS.spam.test(e.address)&&(n=window.const.ErrorMessages[6])},message:function(){0===e.message.length?n=window.const.ErrorMessages[3]:!1===window.utils.PATTERNS.spam.test(e.message)&&(n=window.const.ErrorMessages[6])}}[t](),n}e.addEventListener("focus",(function(){var e=document.activeElement;e!==n&&function(e){var t=e.nextElementSibling;e.classList.remove("form__input--error"),t&&t.classList.contains("form__error-message")&&t.remove()}(e)}),!0),[].forEach.call(t,(function(t){t.addEventListener("blur",(function(t){var n=t.target,o=n.getAttribute("name"),s={};s[o]=n.value;var c=i(s,o);return 0!=c.length&&r(o,c,e),!1}))})),n.addEventListener("click",(function(t){t.preventDefault();var n="",s=function(e){for(var t={},n=0;n<e.elements.length;n++){var o=e.elements[n];"button"!==o.tagName.toLowerCase()&&(t[o.name]=o.value)}return t}(e);for(var c in s)o=!1,n="",0!==(n=i(s,c)).length&&(o=!0,r(c,n,e));return o||window.backend.sendFormData(e),!1}))}(),document.querySelector("[data-mask]").addEventListener("input",(function(){for(var e=this.dataset.mask,t=this.value,n=/[0]/,o=/[0-9]/,r="",i=e.length,s=0,c=0;c<i&&!(c>=t.length)&&("0"!==e[c]||null!==t[s].match(o));){for(;null===e[c].match(n)&&t[s]!==e[c];)r+=e[c++];r+=t[s++],c++}this.value=r})),function(){var e=document.querySelector(".pick-up-form"),t=document.querySelectorAll(".pick-up-form__input"),n=document.querySelector(".pick-up-form__button"),o=e.querySelectorAll(".form__label"),r=o[o.length-1],i=!1;t.forEach((function(e){e.addEventListener("click",(function(){var e;(e=r.nextElementSibling)&&e.classList.contains("form__error-message")&&e.remove()}))})),n.addEventListener("click",(function(t){t.preventDefault(),i=!1;var n,o=function(e){for(var t={},n=0;n<e.elements.length;n++){var o=e.elements[n];"button"!==o.tagName.toLowerCase()&&1==o.checked&&(t[o.value]=o.checked)}return t}(e);return 0===Object.keys(o).length&&(i=!0,(n=e.querySelector(".form__label + p"))?n.textContent=window.const.ErrorMessages[7]:((n=document.createElement("p")).classList.add("form__error-message"),n.textContent=window.const.ErrorMessages[7],r.parentNode.insertBefore(n,r.nextSibling))),i||window.backend.sendFormData(e),!1}))}(),function(){var e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-close"),n=document.querySelector(".popup__title"),o=document.querySelector(".popup__text");function r(e){27===e.keyCode&&(document.querySelector(".popup--open").classList.remove("popup--open"),window.body.unlock())}function i(e){e.classList.remove("popup--open"),n.textContent="",o.textContent="",document.removeEventListener("keydown",r),window.body.unlock()}window.popup={open:function(s){var c=s.title,a=void 0===c?"":c,d=s.text,u=void 0===d?"":d;e.classList.add("popup--open"),window.body.lock(),n.textContent=a,o.textContent=u,t.forEach((function(e){e.addEventListener("click",(function(){i(e.closest(".popup"))}))})),e.addEventListener("click",(function(e){e.target.closest(".popup__body")||i(e.target.closest(".popup"))})),document.addEventListener("keydown",r)}}}(),function(){var e=document.querySelectorAll(".tabs__item"),t=document.querySelectorAll(".tabs__trigger"),n=!1;function o(n){n.preventDefault();var o=n.target.getAttribute("href").replace("#","");t.forEach((function(e){e.classList.remove("tabs__trigger--active")})),e.forEach((function(e){e.classList.remove("tabs__item--show")})),document.querySelector("#"+o).classList.add("tabs__item--show"),n.target.classList.add("tabs__trigger--active")}function r(){n||(n=!0,e.forEach((function(e){e.classList.add("tabs__item--active")})),t.forEach((function(e){e.addEventListener("click",o)}))),document.querySelector(".tabs__trigger").click()}document.addEventListener("DOMContentLoaded",(function(){window.innerWidth>=window.utils.TABLET_WIDTH&&r()})),window.addEventListener("resize",(function(){window.innerWidth<window.utils.TABLET_WIDTH&&n&&(n=!1,t.forEach((function(e){e.classList.remove("tabs__trigger--active"),e.removeEventListener("click",o)}))),window.innerWidth>=window.utils.TABLET_WIDTH&&r()}))}(),window.utils={PATTERNS:{name:/^[А-Яа-яЁё\-\s]+$/,phone:/\+7\s?[\(]{0,1}9[0-9]{2}[\)]{0,1}\s?\d{3}[-]{0,1}\d{2}[-]{0,1}\d{2}/,spam:/[^\<\>\[\]%\&'`]+$/},TABLET_WIDTH:768,onSuccess:function(e){e.querySelector(".form__button").removeAttribute("disabled"),e.reset(),window.popup.open({title:"Успешно!",text:"Сообщение отправлено"})},onError:function(e,t){e.querySelector(".form__button").removeAttribute("disabled");var n={title:"Упс!",text:"Ошибка: "+t};window.popup.open(n)}};
//# sourceMappingURL=scripts.min.js.map
